parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function Cb(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function za(e,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Db(e,r,i){return r&&za(e.prototype,r),i&&za(e,i),e}function Aa(t){let $=t[0],e=t[1],r=t[2];return Math.sqrt($*$+e*e+r*r)}function fa(t,$){return t[0]=$[0],t[1]=$[1],t[2]=$[2],t}function Eb(t,$,e,r){return t[0]=$,t[1]=e,t[2]=r,t}function Ba(t,$,e){return t[0]=$[0]+e[0],t[1]=$[1]+e[1],t[2]=$[2]+e[2],t}function Ca(t,$,e){return t[0]=$[0]-e[0],t[1]=$[1]-e[1],t[2]=$[2]-e[2],t}function Fb(t,$,e){return t[0]=$[0]*e[0],t[1]=$[1]*e[1],t[2]=$[2]*e[2],t}function Gb(t,$,e){return t[0]=$[0]/e[0],t[1]=$[1]/e[1],t[2]=$[2]/e[2],t}function ga(t,$,e){return t[0]=$[0]*e,t[1]=$[1]*e,t[2]=$[2]*e,t}function Hb(t,$){let e=$[0]-t[0],r=$[1]-t[1],p=$[2]-t[2];return Math.sqrt(e*e+r*r+p*p)}function Ib(t,$){let e=$[0]-t[0],r=$[1]-t[1],p=$[2]-t[2];return e*e+r*r+p*p}function Da(t){let $=t[0],e=t[1],r=t[2];return $*$+e*e+r*r}function Jb(t,$){return t[0]=-$[0],t[1]=-$[1],t[2]=-$[2],t}function Kb(t,$){return t[0]=1/$[0],t[1]=1/$[1],t[2]=1/$[2],t}function ha(t,$){let e=$[0],r=$[1],p=$[2],x=e*e+r*r+p*p;return x>0&&(x=1/Math.sqrt(x)),t[0]=$[0]*x,t[1]=$[1]*x,t[2]=$[2]*x,t}function Ea(t,$){return t[0]*$[0]+t[1]*$[1]+t[2]*$[2]}function Fa(t,$,e){let r=$[0],p=$[1],x=$[2],o=e[0],n=e[1],v=e[2];return t[0]=p*v-x*n,t[1]=x*o-r*v,t[2]=r*n-p*o,t}function Lb(t,$,e,r){let p=$[0],x=$[1],o=$[2];return t[0]=p+r*(e[0]-p),t[1]=x+r*(e[1]-x),t[2]=o+r*(e[2]-o),t}function Mb(t,$,e){let r=$[0],p=$[1],x=$[2],o=e[3]*r+e[7]*p+e[11]*x+e[15];return o=o||1,t[0]=(e[0]*r+e[4]*p+e[8]*x+e[12])/o,t[1]=(e[1]*r+e[5]*p+e[9]*x+e[13])/o,t[2]=(e[2]*r+e[6]*p+e[10]*x+e[14])/o,t}function Nb(t,$,e){let r=$[0],p=$[1],x=$[2],o=e[3]*r+e[7]*p+e[11]*x+e[15];return o=o||1,t[0]=(e[0]*r+e[4]*p+e[8]*x)/o,t[1]=(e[1]*r+e[5]*p+e[9]*x)/o,t[2]=(e[2]*r+e[6]*p+e[10]*x)/o,t}function Ob(t,$,e){let r=$[0],p=$[1],x=$[2],o=e[0],n=e[1],v=e[2],s=n*x-v*p,U=v*r-o*x,a=o*p-n*r,u=n*a-v*U,c=v*s-o*a,i=o*U-n*s,l=2*e[3];return s*=l,U*=l,a*=l,u*=2,c*=2,i*=2,t[0]=r+s+u,t[1]=p+U+c,t[2]=x+a+i,t}const Pb=function(){const t=[0,0,0],$=[0,0,0];return function(e,r){fa(t,e),fa($,r),ha(t,t),ha($,$);let p=Ea(t,$);return p>1?0:p<-1?Math.PI:Math.acos(p)}}();function Qb(t,$){return t[0]===$[0]&&t[1]===$[1]&&t[2]===$[2]}class C extends Array{constructor(t=0,i=t,r=t){return super(t,i,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,i=t,r=t){return t.length?this.copy(t):(Eb(this,t,i,r),this)}copy(t){return fa(this,t),this}add(t,i){return i?Ba(this,t,i):Ba(this,this,t),this}sub(t,i){return i?Ca(this,t,i):Ca(this,this,t),this}multiply(t){return t.length?Fb(this,this,t):ga(this,this,t),this}divide(t){return t.length?Gb(this,this,t):ga(this,this,1/t),this}inverse(t=this){return Kb(this,t),this}len(){return Aa(this)}distance(t){return t?Hb(this,t):Aa(this)}squaredLen(){return Da(this)}squaredDistance(t){return t?Ib(this,t):Da(this)}negate(t=this){return Jb(this,t),this}cross(t,i){return i?Fa(this,t,i):Fa(this,this,t),this}scale(t){return ga(this,this,t),this}normalize(){return ha(this,this),this}dot(t){return Ea(this,t)}equals(t){return Qb(this,t)}applyMatrix4(t){return Mb(this,this,t),this}scaleRotateMatrix4(t){return Nb(this,this,t),this}applyQuaternion(t){return Ob(this,this,t),this}angle(t){return Pb(this,t)}lerp(t,i){return Lb(this,this,t,i),this}clone(){return new C(this[0],this[1],this[2])}fromArray(t,i=0){return this[0]=t[i],this[1]=t[i+1],this[2]=t[i+2],this}toArray(t=[],i=0){return t[i]=this[0],t[i+1]=this[1],t[i+2]=this[2],t}transformDirection(t){const i=this[0],r=this[1],e=this[2];return this[0]=t[0]*i+t[4]*r+t[8]*e,this[1]=t[1]*i+t[5]*r+t[9]*e,this[2]=t[2]*i+t[6]*r+t[10]*e,this.normalize()}}const Ga=new C;let Rb=1,Sb=1,Tb=!1;class Ub{constructor(t,e={}){t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=e,this.id=Rb++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let r in e)this.addAttribute(r,e[r])}addAttribute(t,e){if(this.attributes[t]=e,e.id=Sb++,e.size=e.size||1,e.type=e.type||(e.data.constructor===Float32Array?this.gl.FLOAT:e.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),e.target="index"===t?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,e.normalized=e.normalized||!1,e.stride=e.stride||0,e.offset=e.offset||0,e.count=e.count||(e.stride?e.data.byteLength/e.stride:e.data.length/e.size),e.divisor=e.instanced||0,e.needsUpdate=!1,e.buffer||(e.buffer=this.gl.createBuffer(),this.updateAttribute(e)),e.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==e.count*e.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,e.count*e.divisor);this.instancedCount=e.count*e.divisor}else"index"===t?this.drawRange.count=e.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,e.count))}updateAttribute(t){this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),this.gl.bufferData(t.target,t.data,this.gl.STATIC_DRAW),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((t,{name:e,type:r})=>{if(!this.attributes[e])return void console.warn(`active attribute ${e} not being supplied`);const i=this.attributes[e];this.gl.bindBuffer(i.target,i.buffer),this.glState.boundBuffer=i.buffer;let s=1;35674===r&&(s=2),35675===r&&(s=3),35676===r&&(s=4);const a=i.size/s,n=1===s?0:s*s*s,d=1===s?0:s*s;for(let o=0;o<s;o++)this.gl.vertexAttribPointer(t+o,a,i.type,i.normalized,i.stride+n,i.offset+o*d),this.gl.enableVertexAttribArray(t+o),this.gl.renderer.vertexAttribDivisor(t+o,i.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:e=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((t,{name:e})=>{const r=this.attributes[e];r.needsUpdate&&this.updateAttribute(r)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+2*this.drawRange.start,this.instancedCount):this.gl.renderer.drawArraysInstanced(e,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+2*this.drawRange.start):this.gl.drawArrays(e,this.drawRange.start,this.drawRange.count)}getPositionArray(){const t=this.attributes.position;return t.data?t.data:Tb?void 0:(console.warn("No position buffer data found to compute bounds"),Tb=!0)}computeBoundingBox(t){t||(t=this.getPositionArray()),this.bounds||(this.bounds={min:new C,max:new C,center:new C,scale:new C,radius:1/0});const e=this.bounds.min,r=this.bounds.max,i=this.bounds.center,s=this.bounds.scale;e.set(1/0),r.set(-1/0);for(let a=0,n=t.length;a<n;a+=3){const i=t[a],s=t[a+1],n=t[a+2];e.x=Math.min(i,e.x),e.y=Math.min(s,e.y),e.z=Math.min(n,e.z),r.x=Math.max(i,r.x),r.y=Math.max(s,r.y),r.z=Math.max(n,r.z)}s.sub(r,e),i.add(e,r).divide(2)}computeBoundingSphere(t){t||(t=this.getPositionArray()),this.bounds||this.computeBoundingBox(t);let e=0;for(let r=0,i=t.length;r<i;r+=3)Ga.fromArray(t,r),e=Math.max(e,this.bounds.center.squaredDistance(Ga));this.bounds.radius=Math.sqrt(e)}remove(){this.vao&&this.gl.renderer.deleteVertexArray(this.vao);for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}let Vb=1;const Ha={};class Wb{constructor(e,{vertex:r,fragment:t,uniforms:n={},transparent:s=!1,cullFace:a=e.BACK,frontFace:i=e.CCW,depthTest:o=!0,depthWrite:h=!0,depthFunc:l=e.LESS}={}){e.canvas||console.error("gl not passed as fist argument to Program"),this.gl=e,this.uniforms=n,this.id=Vb++,r||console.warn("vertex shader not supplied"),t||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=a,this.frontFace=i,this.depthTest=o,this.depthWrite=h,this.depthFunc=l,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));const u=e.createShader(e.VERTEX_SHADER);e.shaderSource(u,r),e.compileShader(u),""!==e.getShaderInfoLog(u)&&console.warn(`${e.getShaderInfoLog(u)}\nVertex Shader\n${Ia(r)}`);const c=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(c,t),e.compileShader(c),""!==e.getShaderInfoLog(c)&&console.warn(`${e.getShaderInfoLog(c)}\nFragment Shader\n${Ia(t)}`),this.program=e.createProgram(),e.attachShader(this.program,u),e.attachShader(this.program,c),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS))return console.warn(e.getProgramInfoLog(this.program));e.deleteShader(u),e.deleteShader(c),this.uniformLocations=new Map;let g=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS);for(let $=0;$<g;$++){let r=e.getActiveUniform(this.program,$);this.uniformLocations.set(r,e.getUniformLocation(this.program,r.name));const t=r.name.match(/(\w+)/g);r.uniformName=t[0],3===t.length?(r.isStructArray=!0,r.structIndex=Number(t[1]),r.structProperty=t[2]):2===t.length&&isNaN(Number(t[1]))&&(r.isStruct=!0,r.structProperty=t[1])}this.attributeLocations=new Map;const d=[],m=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES);for(let $=0;$<m;$++){const r=e.getActiveAttrib(this.program,$),t=e.getAttribLocation(this.program,r.name);d[t]=r.name,this.attributeLocations.set(r,t)}this.attributeOrder=d.join("")}setBlendFunc(e,r,t,n){this.blendFunc.src=e,this.blendFunc.dst=r,this.blendFunc.srcAlpha=t,this.blendFunc.dstAlpha=n,e&&(this.transparent=!0)}setBlendEquation(e,r){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=r}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}use({flipFaces:e=!1}={}){let r=-1;this.gl.renderer.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.currentProgram=this.id),this.uniformLocations.forEach((e,t)=>{let n=t.uniformName,s=this.uniforms[n];if(t.isStruct&&(s=s[t.structProperty],n+=`.${t.structProperty}`),t.isStructArray&&(s=s[t.structIndex][t.structProperty],n+=`[${t.structIndex}].${t.structProperty}`),!s)return Ka(`Active uniform ${n} has not been supplied`);if(s&&void 0===s.value)return Ka(`${n} uniform is missing a value parameter`);if(s.value.texture)return r+=1,s.value.update(r),ia(this.gl,t.type,e,r);if(s.value.length&&s.value[0].texture){const n=[];return s.value.forEach(e=>{r+=1,e.update(r),n.push(r)}),ia(this.gl,t.type,e,n)}ia(this.gl,t.type,e,s.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function ia(e,r,t,n){n=n.length?Xb(n):n;const s=e.renderer.state.uniformLocations.get(t);if(n.length){if(void 0===s||s.length!==n.length)e.renderer.state.uniformLocations.set(t,n.slice(0));else{if(Yb(s,n))return;s.set?s.set(n):Zb(s,n),e.renderer.state.uniformLocations.set(t,s)}}else{if(s===n)return;e.renderer.state.uniformLocations.set(t,n)}switch(r){case 5126:return n.length?e.uniform1fv(t,n):e.uniform1f(t,n);case 35664:return e.uniform2fv(t,n);case 35665:return e.uniform3fv(t,n);case 35666:return e.uniform4fv(t,n);case 35670:case 5124:case 35678:case 35680:return n.length?e.uniform1iv(t,n):e.uniform1i(t,n);case 35671:case 35667:return e.uniform2iv(t,n);case 35672:case 35668:return e.uniform3iv(t,n);case 35673:case 35669:return e.uniform4iv(t,n);case 35674:return e.uniformMatrix2fv(t,!1,n);case 35675:return e.uniformMatrix3fv(t,!1,n);case 35676:return e.uniformMatrix4fv(t,!1,n);}}function Ia(e){let r=e.split("\n");for(let t=0;t<r.length;t++)r[t]=t+1+": "+r[t];return r.join("\n")}function Xb(e){const r=e.length,t=e[0].length;if(void 0===t)return e;const n=r*t;let s=Ha[n];s||(Ha[n]=s=new Float32Array(n));for(let a=0;a<r;a++)s.set(e[a],a*t);return s}function Yb(e,r){if(e.length!==r.length)return!1;for(let t=0,n=e.length;t<n;t++)if(e[t]!==r[t])return!1;return!0}function Zb(e,r){for(let t=0,n=e.length;t<n;t++)e[t]=r[t]}let Ja=0;function Ka(e){Ja>100||(console.warn(e),++Ja>100&&console.warn("More than 100 program warnings - stopping logs."))}const ja=new C;let $b=1;class _b{constructor({canvas:t=document.createElement("canvas"),width:e=300,height:s=150,dpr:r=1,alpha:i=!1,depth:a=!0,stencil:h=!1,antialias:n=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:d=!1,powerPreference:o="default",autoClear:p=!0,webgl:u=2}={}){const c={alpha:i,depth:a,stencil:h,antialias:n,premultipliedAlpha:l,preserveDrawingBuffer:d,powerPreference:o};this.dpr=r,this.alpha=i,this.color=!0,this.depth=a,this.stencil=h,this.premultipliedAlpha=l,this.autoClear=p,this.id=$b++,2===u&&(this.gl=t.getContext("webgl2",c)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",c)||t.getContext("experimental-webgl",c)),this.gl.renderer=this,this.setSize(e,s),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,e){this.width=t,this.height=e,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=e*this.dpr,Object.assign(this.gl.canvas.style,{width:t+"px",height:e+"px"})}setViewport(t,e){this.state.viewport.width===t&&this.state.viewport.height===e||(this.state.viewport.width=t,this.state.viewport.height=e,this.gl.viewport(0,0,t,e))}enable(t){!0!==this.state[t]&&(this.gl.enable(t),this.state[t]=!0)}disable(t){!1!==this.state[t]&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,e,s,r){this.state.blendFunc.src===t&&this.state.blendFunc.dst===e&&this.state.blendFunc.srcAlpha===s&&this.state.blendFunc.dstAlpha===r||(this.state.blendFunc.src=t,this.state.blendFunc.dst=e,this.state.blendFunc.srcAlpha=s,this.state.blendFunc.dstAlpha=r,void 0!==s?this.gl.blendFuncSeparate(t,e,s,r):this.gl.blendFunc(t,e))}setBlendEquation(t,e){t=t||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===e||(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=e,void 0!==e?this.gl.blendEquationSeparate(t,e):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:e=null}={}){this.state.framebuffer!==e&&(this.state.framebuffer=e,this.gl.bindFramebuffer(t,e))}getExtension(t,e,s){return e&&this.gl[e]?this.gl[e].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),e?this.extensions[t]?this.extensions[t][s].bind(this.extensions[t]):null:this.extensions[t])}sortOpaque(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:t.zDepth!==e.zDepth?t.zDepth-e.zDepth:e.id-t.id}sortTransparent(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.zDepth!==e.zDepth?e.zDepth-t.zDepth:e.id-t.id}sortUI(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:e.id-t.id}getRenderList({scene:t,camera:e,frustumCull:s,sort:r}){let i=[];if(e&&s&&e.updateFrustum(),t.traverse(t=>{if(!t.visible)return!0;t.draw&&(s&&t.frustumCulled&&e&&!e.frustumIntersectsMesh(t)||i.push(t))}),r){const t=[],s=[],r=[];i.forEach(i=>{i.program.transparent?i.program.depthTest?s.push(i):r.push(i):t.push(i),i.zDepth=0,0===i.renderOrder&&i.program.depthTest&&e&&(i.worldMatrix.getTranslation(ja),ja.applyMatrix4(e.projectionViewMatrix),i.zDepth=ja.z)}),t.sort(this.sortOpaque),s.sort(this.sortTransparent),r.sort(this.sortUI),i=t.concat(s,r)}return i}render({scene:t,camera:e,target:s=null,update:r=!0,sort:i=!0,frustumCull:a=!0,clear:h}){null===s?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(s),this.setViewport(s.width,s.height)),(h||this.autoClear&&!1!==h)&&(!this.depth||s&&!s.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),r&&t.updateMatrixWorld(),e&&e.updateMatrixWorld(),this.getRenderList({scene:t,camera:e,frustumCull:a,sort:i}).forEach(t=>{t.draw({camera:e})})}}function ac(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function bc(t,$,e){e*=.5;let r=Math.sin(e);return t[0]=r*$[0],t[1]=r*$[1],t[2]=r*$[2],t[3]=Math.cos(e),t}function La(t,$,e){let r=$[0],o=$[1],i=$[2],p=$[3],X=e[0],n=e[1],j=e[2],s=e[3];return t[0]=r*s+p*X+o*j-i*n,t[1]=o*s+p*n+i*X-r*j,t[2]=i*s+p*j+r*n-o*X,t[3]=p*s-r*X-o*n-i*j,t}function cc(t,$,e){e*=.5;let r=$[0],o=$[1],i=$[2],p=$[3],X=Math.sin(e),n=Math.cos(e);return t[0]=r*n+p*X,t[1]=o*n+i*X,t[2]=i*n-o*X,t[3]=p*n-r*X,t}function dc(t,$,e){e*=.5;let r=$[0],o=$[1],i=$[2],p=$[3],X=Math.sin(e),n=Math.cos(e);return t[0]=r*n-i*X,t[1]=o*n+p*X,t[2]=i*n+r*X,t[3]=p*n-o*X,t}function ec(t,$,e){e*=.5;let r=$[0],o=$[1],i=$[2],p=$[3],X=Math.sin(e),n=Math.cos(e);return t[0]=r*n+o*X,t[1]=o*n-r*X,t[2]=i*n+p*X,t[3]=p*n-i*X,t}function fc(t,$,e,r){let o,i,p,X,n,j=$[0],s=$[1],w=$[2],x=$[3],a=e[0],c=e[1],l=e[2],u=e[3];return(i=j*a+s*c+w*l+x*u)<0&&(i=-i,a=-a,c=-c,l=-l,u=-u),1-i>1e-6?(o=Math.acos(i),p=Math.sin(o),X=Math.sin((1-r)*o)/p,n=Math.sin(r*o)/p):(X=1-r,n=r),t[0]=X*j+n*a,t[1]=X*s+n*c,t[2]=X*w+n*l,t[3]=X*x+n*u,t}function gc(t,$){let e=$[0],r=$[1],o=$[2],i=$[3],p=e*e+r*r+o*o+i*i,X=p?1/p:0;return t[0]=-e*X,t[1]=-r*X,t[2]=-o*X,t[3]=i*X,t}function hc(t,$){return t[0]=-$[0],t[1]=-$[1],t[2]=-$[2],t[3]=$[3],t}function ic(t,$){let e,r=$[0]+$[4]+$[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=($[5]-$[7])*e,t[1]=($[6]-$[2])*e,t[2]=($[1]-$[3])*e;else{let r=0;$[4]>$[0]&&(r=1),$[8]>$[3*r+r]&&(r=2);let o=(r+1)%3,i=(r+2)%3;e=Math.sqrt($[3*r+r]-$[3*o+o]-$[3*i+i]+1),t[r]=.5*e,e=.5/e,t[3]=($[3*o+i]-$[3*i+o])*e,t[o]=($[3*o+r]+$[3*r+o])*e,t[i]=($[3*i+r]+$[3*r+i])*e}return t}function jc(t,$,e="YXZ"){let r=Math.sin(.5*$[0]),o=Math.cos(.5*$[0]),i=Math.sin(.5*$[1]),p=Math.cos(.5*$[1]),X=Math.sin(.5*$[2]),n=Math.cos(.5*$[2]);return"XYZ"===e?(t[0]=r*p*n+o*i*X,t[1]=o*i*n-r*p*X,t[2]=o*p*X+r*i*n,t[3]=o*p*n-r*i*X):"YXZ"===e?(t[0]=r*p*n+o*i*X,t[1]=o*i*n-r*p*X,t[2]=o*p*X-r*i*n,t[3]=o*p*n+r*i*X):"ZXY"===e?(t[0]=r*p*n-o*i*X,t[1]=o*i*n+r*p*X,t[2]=o*p*X+r*i*n,t[3]=o*p*n-r*i*X):"ZYX"===e?(t[0]=r*p*n-o*i*X,t[1]=o*i*n+r*p*X,t[2]=o*p*X-r*i*n,t[3]=o*p*n+r*i*X):"YZX"===e?(t[0]=r*p*n+o*i*X,t[1]=o*i*n+r*p*X,t[2]=o*p*X-r*i*n,t[3]=o*p*n-r*i*X):"XZY"===e&&(t[0]=r*p*n-o*i*X,t[1]=o*i*n-r*p*X,t[2]=o*p*X+r*i*n,t[3]=o*p*n+r*i*X),t}function kc($,t){return $[0]=t[0],$[1]=t[1],$[2]=t[2],$[3]=t[3],$}function lc($,t,e,r,o){return $[0]=t,$[1]=e,$[2]=r,$[3]=o,$}function mc($,t){let e=t[0],r=t[1],o=t[2],n=t[3],p=e*e+r*r+o*o+n*n;return p>0&&(p=1/Math.sqrt(p)),$[0]=e*p,$[1]=r*p,$[2]=o*p,$[3]=n*p,$}function nc($,t){return $[0]*t[0]+$[1]*t[1]+$[2]*t[2]+$[3]*t[3]}const oc=kc;const pc=lc;const qc=nc;const rc=mc;class sc extends Array{constructor(t=0,i=0,r=0,s=1){return super(t,i,r,s),this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this[0]=t,this.onChange()}set y(t){this[1]=t,this.onChange()}set z(t){this[2]=t,this.onChange()}set w(t){this[3]=t,this.onChange()}identity(){return ac(this),this.onChange(),this}set(t,i,r,s){return t.length?this.copy(t):(pc(this,t,i,r,s),this.onChange(),this)}rotateX(t){return cc(this,this,t),this.onChange(),this}rotateY(t){return dc(this,this,t),this.onChange(),this}rotateZ(t){return ec(this,this,t),this.onChange(),this}inverse(t=this){return gc(this,t),this.onChange(),this}conjugate(t=this){return hc(this,t),this.onChange(),this}copy(t){return oc(this,t),this.onChange(),this}normalize(t=this){return rc(this,t),this.onChange(),this}multiply(t,i){return i?La(this,t,i):La(this,this,t),this.onChange(),this}dot(t){return qc(this,t)}fromMatrix3(t){return ic(this,t),this.onChange(),this}fromEuler(t){return jc(this,t,t.order),this}fromAxisAngle(t,i){return bc(this,t,i),this}slerp(t,i){return fc(this,this,t,i),this}fromArray(t,i=0){return this[0]=t[i],this[1]=t[i+1],this[2]=t[i+2],this[3]=t[i+3],this}toArray(t=[],i=0){return t[i]=this[0],t[i+1]=this[1],t[i+2]=this[2],t[i+3]=this[3],t}}const tc=1e-6;function uc(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function vc(t,r,$,e,o,n,f,p,a,x,I,s,i,u,l,c,h){return t[0]=r,t[1]=$,t[2]=e,t[3]=o,t[4]=n,t[5]=f,t[6]=p,t[7]=a,t[8]=x,t[9]=I,t[10]=s,t[11]=i,t[12]=u,t[13]=l,t[14]=c,t[15]=h,t}function wc(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xc(t,r){let $=r[0],e=r[1],o=r[2],n=r[3],f=r[4],p=r[5],a=r[6],x=r[7],I=r[8],s=r[9],i=r[10],u=r[11],l=r[12],c=r[13],h=r[14],g=r[15],M=$*p-e*f,m=$*a-o*f,y=$*x-n*f,S=e*a-o*p,d=e*x-n*p,v=o*x-n*a,T=I*c-s*l,q=I*h-i*l,R=I*g-u*l,O=s*h-i*c,b=s*g-u*c,A=i*g-u*h,Q=M*A-m*b+y*O+S*R-d*q+v*T;return Q?(Q=1/Q,t[0]=(p*A-a*b+x*O)*Q,t[1]=(o*b-e*A-n*O)*Q,t[2]=(c*v-h*d+g*S)*Q,t[3]=(i*d-s*v-u*S)*Q,t[4]=(a*R-f*A-x*q)*Q,t[5]=($*A-o*R+n*q)*Q,t[6]=(h*y-l*v-g*m)*Q,t[7]=(I*v-i*y+u*m)*Q,t[8]=(f*b-p*R+x*T)*Q,t[9]=(e*R-$*b-n*T)*Q,t[10]=(l*d-c*y+g*M)*Q,t[11]=(s*y-I*d-u*M)*Q,t[12]=(p*q-f*O-a*T)*Q,t[13]=($*O-e*q+o*T)*Q,t[14]=(c*m-l*S-h*M)*Q,t[15]=(I*S-s*m+i*M)*Q,t):null}function yc(t){let r=t[0],$=t[1],e=t[2],o=t[3],n=t[4],f=t[5],p=t[6],a=t[7],x=t[8],I=t[9],s=t[10],i=t[11],u=t[12],l=t[13],c=t[14],h=t[15];return(r*f-$*n)*(s*h-i*c)-(r*p-e*n)*(I*h-i*l)+(r*a-o*n)*(I*c-s*l)+($*p-e*f)*(x*h-i*u)-($*a-o*f)*(x*c-s*u)+(e*a-o*p)*(x*l-I*u)}function Ma(t,r,$){let e=r[0],o=r[1],n=r[2],f=r[3],p=r[4],a=r[5],x=r[6],I=r[7],s=r[8],i=r[9],u=r[10],l=r[11],c=r[12],h=r[13],g=r[14],M=r[15],m=$[0],y=$[1],S=$[2],d=$[3];return t[0]=m*e+y*p+S*s+d*c,t[1]=m*o+y*a+S*i+d*h,t[2]=m*n+y*x+S*u+d*g,t[3]=m*f+y*I+S*l+d*M,m=$[4],y=$[5],S=$[6],d=$[7],t[4]=m*e+y*p+S*s+d*c,t[5]=m*o+y*a+S*i+d*h,t[6]=m*n+y*x+S*u+d*g,t[7]=m*f+y*I+S*l+d*M,m=$[8],y=$[9],S=$[10],d=$[11],t[8]=m*e+y*p+S*s+d*c,t[9]=m*o+y*a+S*i+d*h,t[10]=m*n+y*x+S*u+d*g,t[11]=m*f+y*I+S*l+d*M,m=$[12],y=$[13],S=$[14],d=$[15],t[12]=m*e+y*p+S*s+d*c,t[13]=m*o+y*a+S*i+d*h,t[14]=m*n+y*x+S*u+d*g,t[15]=m*f+y*I+S*l+d*M,t}function zc(t,r,$){let e,o,n,f,p,a,x,I,s,i,u,l,c=$[0],h=$[1],g=$[2];return r===t?(t[12]=r[0]*c+r[4]*h+r[8]*g+r[12],t[13]=r[1]*c+r[5]*h+r[9]*g+r[13],t[14]=r[2]*c+r[6]*h+r[10]*g+r[14],t[15]=r[3]*c+r[7]*h+r[11]*g+r[15]):(e=r[0],o=r[1],n=r[2],f=r[3],p=r[4],a=r[5],x=r[6],I=r[7],s=r[8],i=r[9],u=r[10],l=r[11],t[0]=e,t[1]=o,t[2]=n,t[3]=f,t[4]=p,t[5]=a,t[6]=x,t[7]=I,t[8]=s,t[9]=i,t[10]=u,t[11]=l,t[12]=e*c+p*h+s*g+r[12],t[13]=o*c+a*h+i*g+r[13],t[14]=n*c+x*h+u*g+r[14],t[15]=f*c+I*h+l*g+r[15]),t}function Ac(t,r,$){let e=$[0],o=$[1],n=$[2];return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=r[7]*o,t[8]=r[8]*n,t[9]=r[9]*n,t[10]=r[10]*n,t[11]=r[11]*n,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function Bc(t,r,$,e){let o,n,f,p,a,x,I,s,i,u,l,c,h,g,M,m,y,S,d,v,T,q,R,O,b=e[0],A=e[1],Q=e[2],E=Math.hypot(b,A,Q);return Math.abs(E)<tc?null:(b*=E=1/E,A*=E,Q*=E,o=Math.sin($),f=1-(n=Math.cos($)),p=r[0],a=r[1],x=r[2],I=r[3],s=r[4],i=r[5],u=r[6],l=r[7],c=r[8],h=r[9],g=r[10],M=r[11],m=b*b*f+n,y=A*b*f+Q*o,S=Q*b*f-A*o,d=b*A*f-Q*o,v=A*A*f+n,T=Q*A*f+b*o,q=b*Q*f+A*o,R=A*Q*f-b*o,O=Q*Q*f+n,t[0]=p*m+s*y+c*S,t[1]=a*m+i*y+h*S,t[2]=x*m+u*y+g*S,t[3]=I*m+l*y+M*S,t[4]=p*d+s*v+c*T,t[5]=a*d+i*v+h*T,t[6]=x*d+u*v+g*T,t[7]=I*d+l*v+M*T,t[8]=p*q+s*R+c*O,t[9]=a*q+i*R+h*O,t[10]=x*q+u*R+g*O,t[11]=I*q+l*R+M*O,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)}function Cc(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t}function Na(t,r){let $=r[0],e=r[1],o=r[2],n=r[4],f=r[5],p=r[6],a=r[8],x=r[9],I=r[10];return t[0]=Math.hypot($,e,o),t[1]=Math.hypot(n,f,p),t[2]=Math.hypot(a,x,I),t}function Dc(t){let r=t[0],$=t[1],e=t[2],o=t[4],n=t[5],f=t[6],p=t[8],a=t[9],x=t[10];const I=r*r+$*$+e*e,s=o*o+n*n+f*f,i=p*p+a*a+x*x;return Math.sqrt(Math.max(I,s,i))}const Ec=function(){const t=[0,0,0];return function(r,$){let e=t;Na(e,$);let o=1/e[0],n=1/e[1],f=1/e[2],p=$[0]*o,a=$[1]*n,x=$[2]*f,I=$[4]*o,s=$[5]*n,i=$[6]*f,u=$[8]*o,l=$[9]*n,c=$[10]*f,h=p+s+c,g=0;return h>0?(g=2*Math.sqrt(h+1),r[3]=.25*g,r[0]=(i-l)/g,r[1]=(u-x)/g,r[2]=(a-I)/g):p>s&&p>c?(g=2*Math.sqrt(1+p-s-c),r[3]=(i-l)/g,r[0]=.25*g,r[1]=(a+I)/g,r[2]=(u+x)/g):s>c?(g=2*Math.sqrt(1+s-p-c),r[3]=(u-x)/g,r[0]=(a+I)/g,r[1]=.25*g,r[2]=(i+l)/g):(g=2*Math.sqrt(1+c-p-s),r[3]=(a-I)/g,r[0]=(u+x)/g,r[1]=(i+l)/g,r[2]=.25*g),r}}();function Fc(t,r,$,e){let o=r[0],n=r[1],f=r[2],p=r[3],a=o+o,x=n+n,I=f+f,s=o*a,i=o*x,u=o*I,l=n*x,c=n*I,h=f*I,g=p*a,M=p*x,m=p*I,y=e[0],S=e[1],d=e[2];return t[0]=(1-(l+h))*y,t[1]=(i+m)*y,t[2]=(u-M)*y,t[3]=0,t[4]=(i-m)*S,t[5]=(1-(s+h))*S,t[6]=(c+g)*S,t[7]=0,t[8]=(u+M)*d,t[9]=(c-g)*d,t[10]=(1-(s+l))*d,t[11]=0,t[12]=$[0],t[13]=$[1],t[14]=$[2],t[15]=1,t}function Gc(t,r){let $=r[0],e=r[1],o=r[2],n=r[3],f=$+$,p=e+e,a=o+o,x=$*f,I=e*f,s=e*p,i=o*f,u=o*p,l=o*a,c=n*f,h=n*p,g=n*a;return t[0]=1-s-l,t[1]=I+g,t[2]=i-h,t[3]=0,t[4]=I-g,t[5]=1-x-l,t[6]=u+c,t[7]=0,t[8]=i+h,t[9]=u-c,t[10]=1-x-s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Hc(t,r,$,e,o){let n=1/Math.tan(r/2),f=1/(e-o);return t[0]=n/$,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+e)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*e*f,t[15]=0,t}function Ic(t,r,$,e,o,n,f){let p=1/(r-$),a=1/(e-o),x=1/(n-f);return t[0]=-2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*x,t[11]=0,t[12]=(r+$)*p,t[13]=(o+e)*a,t[14]=(f+n)*x,t[15]=1,t}function Jc(t,r,$,e){let o=r[0],n=r[1],f=r[2],p=e[0],a=e[1],x=e[2],I=o-$[0],s=n-$[1],i=f-$[2],u=I*I+s*s+i*i;0===u?i=1:(I*=u=1/Math.sqrt(u),s*=u,i*=u);let l=a*i-x*s,c=x*I-p*i,h=p*s-a*I;return 0===(u=l*l+c*c+h*h)&&(x?p+=1e-6:a?x+=1e-6:a+=1e-6,u=(l=a*i-x*s)*l+(c=x*I-p*i)*c+(h=p*s-a*I)*h),l*=u=1/Math.sqrt(u),c*=u,h*=u,t[0]=l,t[1]=c,t[2]=h,t[3]=0,t[4]=s*h-i*c,t[5]=i*l-I*h,t[6]=I*c-s*l,t[7]=0,t[8]=I,t[9]=s,t[10]=i,t[11]=0,t[12]=o,t[13]=n,t[14]=f,t[15]=1,t}class N extends Array{constructor(t=1,i=0,s=0,r=0,h=0,e=1,n=0,$=0,a=0,o=0,u=1,c=0,p=0,m=0,w=0,q=1){return super(t,i,s,r,h,e,n,$,a,o,u,c,p,m,w,q),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,i,s,r,h,e,n,$,a,o,u,c,p,m,w,q){return t.length?this.copy(t):(vc(this,t,i,s,r,h,e,n,$,a,o,u,c,p,m,w,q),this)}translate(t,i=this){return zc(this,i,t),this}rotate(t,i,s=this){return Bc(this,s,t,i),this}scale(t,i=this){return Ac(this,i,"number"==typeof t?[t,t,t]:t),this}multiply(t,i){return i?Ma(this,t,i):Ma(this,this,t),this}identity(){return wc(this),this}copy(t){return uc(this,t),this}fromPerspective({fov:t,aspect:i,near:s,far:r}={}){return Hc(this,t,i,s,r),this}fromOrthogonal({left:t,right:i,bottom:s,top:r,near:h,far:e}){return Ic(this,t,i,s,r,h,e),this}fromQuaternion(t){return Gc(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return xc(this,t),this}compose(t,i,s){return Fc(this,t,i,s),this}getRotation(t){return Ec(t,this),this}getTranslation(t){return Cc(t,this),this}getScaling(t){return Na(t,this),this}getMaxScaleOnAxis(){return Dc(this)}lookAt(t,i,s){return Jc(this,t,i,s),this}determinant(){return yc(this)}fromArray(t,i=0){return this[0]=t[i],this[1]=t[i+1],this[2]=t[i+2],this[3]=t[i+3],this[4]=t[i+4],this[5]=t[i+5],this[6]=t[i+6],this[7]=t[i+7],this[8]=t[i+8],this[9]=t[i+9],this[10]=t[i+10],this[11]=t[i+11],this[12]=t[i+12],this[13]=t[i+13],this[14]=t[i+14],this[15]=t[i+15],this}toArray(t=[],i=0){return t[i]=this[0],t[i+1]=this[1],t[i+2]=this[2],t[i+3]=this[3],t[i+4]=this[4],t[i+5]=this[5],t[i+6]=this[6],t[i+7]=this[7],t[i+8]=this[8],t[i+9]=this[9],t[i+10]=this[10],t[i+11]=this[11],t[i+12]=this[12],t[i+13]=this[13],t[i+14]=this[14],t[i+15]=this[15],t}}function Kc(a,t,M="YXZ"){return"XYZ"===M?(a[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(a[0]=Math.atan2(-t[9],t[10]),a[2]=Math.atan2(-t[4],t[0])):(a[0]=Math.atan2(t[6],t[5]),a[2]=0)):"YXZ"===M?(a[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(a[1]=Math.atan2(t[8],t[10]),a[2]=Math.atan2(t[1],t[5])):(a[1]=Math.atan2(-t[2],t[0]),a[2]=0)):"ZXY"===M?(a[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(a[1]=Math.atan2(-t[2],t[10]),a[2]=Math.atan2(-t[4],t[5])):(a[1]=0,a[2]=Math.atan2(t[1],t[0]))):"ZYX"===M?(a[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(a[0]=Math.atan2(t[6],t[10]),a[2]=Math.atan2(t[1],t[0])):(a[0]=0,a[2]=Math.atan2(-t[4],t[5]))):"YZX"===M?(a[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(a[0]=Math.atan2(-t[9],t[5]),a[1]=Math.atan2(-t[2],t[0])):(a[0]=0,a[1]=Math.atan2(t[8],t[10]))):"XZY"===M&&(a[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(a[0]=Math.atan2(t[6],t[5]),a[1]=Math.atan2(t[8],t[0])):(a[0]=Math.atan2(-t[9],t[10]),a[1]=0)),a}const Oa=new N;class Lc extends Array{constructor(t=0,r=t,e=t,s="YXZ"){return super(t,r,e),this.order=s,this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t,this.onChange()}set y(t){this[1]=t,this.onChange()}set z(t){this[2]=t,this.onChange()}set(t,r=t,e=t){return t.length?this.copy(t):(this[0]=t,this[1]=r,this[2]=e,this.onChange(),this)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.onChange(),this}reorder(t){return this.order=t,this.onChange(),this}fromRotationMatrix(t,r=this.order){return Kc(this,t,r),this}fromQuaternion(t,r=this.order){return Oa.fromQuaternion(t),this.fromRotationMatrix(Oa,r)}}class ka{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new N,this.worldMatrix=new N,this.matrixAutoUpdate=!0,this.position=new C,this.quaternion=new sc,this.scale=new C(1),this.rotation=new Lc,this.up=new C(0,1,0),this.rotation.onChange=()=>this.quaternion.fromEuler(this.rotation),this.quaternion.onChange=()=>this.rotation.fromQuaternion(this.quaternion)}setParent(t,i=!0){i&&this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,i&&t&&t.addChild(this,!1)}addChild(t,i=!0){~this.children.indexOf(t)||this.children.push(t),i&&t.setParent(this,!1)}removeChild(t,i=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),i&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let i=0,r=this.children.length;i<r;i++)this.children[i].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let i=0,r=this.children.length;i<r;i++)this.children[i].traverse(t)}decompose(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,i=!1){i?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}}const Mc=new N,Nc=new C,Oc=new C;class Pc extends ka{constructor(t,{near:r=.1,far:e=100,fov:i=45,aspect:s=1,left:o,right:a,bottom:n,top:p,zoom:h=1}={}){super(),Object.assign(this,{near:r,far:e,fov:i,aspect:s,left:o,right:a,bottom:n,top:p,zoom:h}),this.projectionMatrix=new N,this.viewMatrix=new N,this.projectionViewMatrix=new N,this.worldPosition=new C,this.type=o||a?"orthographic":"perspective","orthographic"===this.type?this.orthographic():this.perspective()}perspective({near:t=this.near,far:r=this.far,fov:e=this.fov,aspect:i=this.aspect}={}){return Object.assign(this,{near:t,far:r,fov:e,aspect:i}),this.projectionMatrix.fromPerspective({fov:e*(Math.PI/180),aspect:i,near:t,far:r}),this.type="perspective",this}orthographic({near:t=this.near,far:r=this.far,left:e=this.left,right:i=this.right,bottom:s=this.bottom,top:o=this.top,zoom:a=this.zoom}={}){return Object.assign(this,{near:t,far:r,left:e,right:i,bottom:s,top:o,zoom:a}),e/=a,i/=a,s/=a,o/=a,this.projectionMatrix.fromOrthogonal({left:e,right:i,bottom:s,top:o,near:t,far:r}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}lookAt(t){return super.lookAt(t,!0),this}project(t){return t.applyMatrix4(this.viewMatrix),t.applyMatrix4(this.projectionMatrix),this}unproject(t){return t.applyMatrix4(Mc.inverse(this.projectionMatrix)),t.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new C,new C,new C,new C,new C,new C]);const t=this.projectionViewMatrix;this.frustum[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).constant=t[15]-t[12],this.frustum[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).constant=t[15]+t[12],this.frustum[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).constant=t[15]+t[13],this.frustum[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).constant=t[15]-t[13],this.frustum[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).constant=t[15]-t[14],this.frustum[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).constant=t[15]+t[14];for(let r=0;r<6;r++){const t=1/this.frustum[r].distance();this.frustum[r].multiply(t),this.frustum[r].constant*=t}}frustumIntersectsMesh(t){if(!t.geometry.attributes.position)return!0;if(t.geometry.bounds&&t.geometry.bounds.radius!==1/0||t.geometry.computeBoundingSphere(),!t.geometry.bounds)return!0;const r=Nc;r.copy(t.geometry.bounds.center),r.applyMatrix4(t.worldMatrix);const e=t.geometry.bounds.radius*t.worldMatrix.getMaxScaleOnAxis();return this.frustumIntersectsSphere(r,e)}frustumIntersectsSphere(t,r){const e=Oc;for(let i=0;i<6;i++){const s=this.frustum[i];if(e.copy(s).dot(t)+s.constant<-r)return!1}return!0}}function Qc(t,$){return t[0]=$[0],t[1]=$[1],t[2]=$[2],t[3]=$[4],t[4]=$[5],t[5]=$[6],t[6]=$[8],t[7]=$[9],t[8]=$[10],t}function Rc(t,$){let r=$[0],e=$[1],o=$[2],n=$[3],p=r+r,d=e+e,G=o+o,K=r*p,Y=e*p,x=e*d,u=o*p,a=o*d,i=o*G,s=n*p,l=n*d,c=n*G;return t[0]=1-x-i,t[3]=Y-c,t[6]=u+l,t[1]=Y+c,t[4]=1-K-i,t[7]=a-s,t[2]=u-l,t[5]=a+s,t[8]=1-K-x,t}function Sc(t,$){return t[0]=$[0],t[1]=$[1],t[2]=$[2],t[3]=$[3],t[4]=$[4],t[5]=$[5],t[6]=$[6],t[7]=$[7],t[8]=$[8],t}function Tc(t,$,r,e,o,n,p,d,G,K){return t[0]=$,t[1]=r,t[2]=e,t[3]=o,t[4]=n,t[5]=p,t[6]=d,t[7]=G,t[8]=K,t}function Uc(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Vc(t,$){let r=$[0],e=$[1],o=$[2],n=$[3],p=$[4],d=$[5],G=$[6],K=$[7],Y=$[8],x=Y*p-d*K,u=-Y*n+d*G,a=K*n-p*G,i=r*x+e*u+o*a;return i?(i=1/i,t[0]=x*i,t[1]=(-Y*e+o*K)*i,t[2]=(d*e-o*p)*i,t[3]=u*i,t[4]=(Y*r-o*G)*i,t[5]=(-d*r+o*n)*i,t[6]=a*i,t[7]=(-K*r+e*G)*i,t[8]=(p*r-e*n)*i,t):null}function Pa(t,$,r){let e=$[0],o=$[1],n=$[2],p=$[3],d=$[4],G=$[5],K=$[6],Y=$[7],x=$[8],u=r[0],a=r[1],i=r[2],s=r[3],l=r[4],c=r[5],f=r[6],m=r[7],y=r[8];return t[0]=u*e+a*p+i*K,t[1]=u*o+a*d+i*Y,t[2]=u*n+a*G+i*x,t[3]=s*e+l*p+c*K,t[4]=s*o+l*d+c*Y,t[5]=s*n+l*G+c*x,t[6]=f*e+m*p+y*K,t[7]=f*o+m*d+y*Y,t[8]=f*n+m*G+y*x,t}function Wc(t,$,r){let e=$[0],o=$[1],n=$[2],p=$[3],d=$[4],G=$[5],K=$[6],Y=$[7],x=$[8],u=r[0],a=r[1];return t[0]=e,t[1]=o,t[2]=n,t[3]=p,t[4]=d,t[5]=G,t[6]=u*e+a*p+K,t[7]=u*o+a*d+Y,t[8]=u*n+a*G+x,t}function Xc(t,$,r){let e=$[0],o=$[1],n=$[2],p=$[3],d=$[4],G=$[5],K=$[6],Y=$[7],x=$[8],u=Math.sin(r),a=Math.cos(r);return t[0]=a*e+u*p,t[1]=a*o+u*d,t[2]=a*n+u*G,t[3]=a*p-u*e,t[4]=a*d-u*o,t[5]=a*G-u*n,t[6]=K,t[7]=Y,t[8]=x,t}function Yc(t,$,r){let e=r[0],o=r[1];return t[0]=e*$[0],t[1]=e*$[1],t[2]=e*$[2],t[3]=o*$[3],t[4]=o*$[4],t[5]=o*$[5],t[6]=$[6],t[7]=$[7],t[8]=$[8],t}function Zc(t,$){let r=$[0],e=$[1],o=$[2],n=$[3],p=$[4],d=$[5],G=$[6],K=$[7],Y=$[8],x=$[9],u=$[10],a=$[11],i=$[12],s=$[13],l=$[14],c=$[15],f=r*d-e*p,m=r*G-o*p,y=r*K-n*p,M=e*G-o*d,v=e*K-n*d,S=o*K-n*G,b=Y*s-x*i,j=Y*l-u*i,F=Y*c-a*i,Q=x*l-u*s,h=x*c-a*s,E=u*c-a*l,I=f*E-m*h+y*Q+M*F-v*j+S*b;return I?(I=1/I,t[0]=(d*E-G*h+K*Q)*I,t[1]=(G*F-p*E-K*j)*I,t[2]=(p*h-d*F+K*b)*I,t[3]=(o*h-e*E-n*Q)*I,t[4]=(r*E-o*F+n*j)*I,t[5]=(e*F-r*h-n*b)*I,t[6]=(s*S-l*v+c*M)*I,t[7]=(l*y-i*S-c*m)*I,t[8]=(i*v-s*y+c*f)*I,t):null}class $c extends Array{constructor(t=1,r=0,s=0,i=0,$=1,e=0,n=0,a=0,u=1){return super(t,r,s,i,$,e,n,a,u),this}set(t,r,s,i,$,e,n,a,u){return t.length?this.copy(t):(Tc(this,t,r,s,i,$,e,n,a,u),this)}translate(t,r=this){return Wc(this,r,t),this}rotate(t,r=this){return Xc(this,r,t),this}scale(t,r=this){return Yc(this,r,t),this}multiply(t,r){return r?Pa(this,t,r):Pa(this,this,t),this}identity(){return Uc(this),this}copy(t){return Sc(this,t),this}fromMatrix4(t){return Qc(this,t),this}fromQuaternion(t){return Rc(this,t),this}fromBasis(t,r,s){return this.set(t[0],t[1],t[2],r[0],r[1],r[2],s[0],s[1],s[2]),this}inverse(t=this){return Vc(this,t),this}getNormalMatrix(t){return Zc(this,t),this}}let _c=0;class ad extends ka{constructor(r,{geometry:e,program:a,mode:t=r.TRIANGLES,frustumCulled:i=!0,renderOrder:s=0}={}){super(),r.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=r,this.id=_c++,this.geometry=e,this.program=a,this.mode=t,this.frustumCulled=i,this.renderOrder=s,this.modelViewMatrix=new N,this.normalMatrix=new $c,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(r){return this.beforeRenderCallbacks.push(r),this}onAfterRender(r){return this.afterRenderCallbacks.push(r),this}draw({camera:r}={}){this.beforeRenderCallbacks.forEach(e=>e&&e({mesh:this,camera:r})),r&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=r.projectionMatrix,this.program.uniforms.cameraPosition.value=r.worldPosition,this.program.uniforms.viewMatrix.value=r.viewMatrix,this.modelViewMatrix.multiply(r.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);let e=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:e}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(e=>e&&e({mesh:this,camera:r}))}}const Qa=new Uint8Array(4);function Ra(t){return 0==(t&t-1)}let bd=1;class cd{constructor(t,{image:i,target:e=t.TEXTURE_2D,type:s=t.UNSIGNED_BYTE,format:h=t.RGBA,internalFormat:a=h,wrapS:r=t.CLAMP_TO_EDGE,wrapT:l=t.CLAMP_TO_EDGE,generateMipmaps:g=!0,minFilter:p=g?t.NEAREST_MIPMAP_LINEAR:t.LINEAR,magFilter:m=t.LINEAR,premultiplyAlpha:n=!1,unpackAlignment:E=4,flipY:o=e==t.TEXTURE_2D,anisotropy:T=0,level:A=0,width:x,height:P=x}={}){this.gl=t,this.id=bd++,this.image=i,this.target=e,this.type=s,this.format=h,this.internalFormat=a,this.minFilter=p,this.magFilter=m,this.wrapS=r,this.wrapT=l,this.generateMipmaps=g,this.premultiplyAlpha=n,this.unpackAlignment=E,this.flipY=o,this.anisotropy=Math.min(T,this.gl.renderer.parameters.maxAnisotropy),this.level=A,this.width=x,this.height=P,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(t=0){const i=!(this.image===this.store.image&&!this.needsUpdate);if((i||this.glState.textureUnits[t]!==this.id)&&(this.gl.renderer.activeTexture(t),this.bind()),i){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let t=0;t<6;t++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+t,this.level,this.internalFormat,this.format,this.type,this.image[t]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let t=0;t<this.image.length;t++)this.gl.compressedTexImage2D(this.target,t,this.internalFormat,this.image[t].width,this.image[t].height,0,this.image[t].data);else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(this.gl.renderer.isWebgl2||Ra(this.image.width)&&Ra(this.image.height)?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let t=0;t<6;t++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Qa);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Qa);this.store.image=this.image}}}function dd($,t){return $[0]=t[0],$[1]=t[1],$}function ed($,t,r){return $[0]=t,$[1]=r,$}function Sa($,t,r){return $[0]=t[0]+r[0],$[1]=t[1]+r[1],$}function Ta($,t,r){return $[0]=t[0]-r[0],$[1]=t[1]-r[1],$}function fd($,t,r){return $[0]=t[0]*r[0],$[1]=t[1]*r[1],$}function gd($,t,r){return $[0]=t[0]/r[0],$[1]=t[1]/r[1],$}function la($,t,r){return $[0]=t[0]*r,$[1]=t[1]*r,$}function hd($,t){var r=t[0]-$[0],e=t[1]-$[1];return Math.sqrt(r*r+e*e)}function id($,t){var r=t[0]-$[0],e=t[1]-$[1];return r*r+e*e}function Ua($){var t=$[0],r=$[1];return Math.sqrt(t*t+r*r)}function jd($){var t=$[0],r=$[1];return t*t+r*r}function kd($,t){return $[0]=-t[0],$[1]=-t[1],$}function ld($,t){return $[0]=1/t[0],$[1]=1/t[1],$}function md($,t){var r=t[0],e=t[1],o=r*r+e*e;return o>0&&(o=1/Math.sqrt(o)),$[0]=t[0]*o,$[1]=t[1]*o,$}function nd($,t){return $[0]*t[0]+$[1]*t[1]}function Va($,t){return $[0]*t[1]-$[1]*t[0]}function od($,t,r,e){var o=t[0],n=t[1];return $[0]=o+e*(r[0]-o),$[1]=n+e*(r[1]-n),$}function pd($,t,r){var e=t[0],o=t[1];return $[0]=r[0]*e+r[3]*o+r[6],$[1]=r[1]*e+r[4]*o+r[7],$}function qd($,t,r){let e=t[0],o=t[1];return $[0]=r[0]*e+r[4]*o+r[12],$[1]=r[1]*e+r[5]*o+r[13],$}function rd($,t){return $[0]===t[0]&&$[1]===t[1]}class Z extends Array{constructor(t=0,r=t){return super(t,r),this}get x(){return this[0]}get y(){return this[1]}set x(t){this[0]=t}set y(t){this[1]=t}set(t,r=t){return t.length?this.copy(t):(ed(this,t,r),this)}copy(t){return dd(this,t),this}add(t,r){return r?Sa(this,t,r):Sa(this,this,t),this}sub(t,r){return r?Ta(this,t,r):Ta(this,this,t),this}multiply(t){return t.length?fd(this,this,t):la(this,this,t),this}divide(t){return t.length?gd(this,this,t):la(this,this,1/t),this}inverse(t=this){return ld(this,t),this}len(){return Ua(this)}distance(t){return t?hd(this,t):Ua(this)}squaredLen(){return this.squaredDistance()}squaredDistance(t){return t?id(this,t):jd(this)}negate(t=this){return kd(this,t),this}cross(t,r){return r?Va(t,r):Va(this,t)}scale(t){return la(this,this,t),this}normalize(){return md(this,this),this}dot(t){return nd(this,t)}equals(t){return rd(this,t)}applyMatrix3(t){return pd(this,this,t),this}applyMatrix4(t){return qd(this,this,t),this}lerp(t,r){od(this,this,t,r)}clone(){return new Z(this[0],this[1])}fromArray(t,r=0){return this[0]=t[r],this[1]=t[r+1],this}toArray(t=[],r=0){return t[r]=this[0],t[r+1]=this[1],t}}class Wa extends Ub{constructor(e,{width:t=1,height:r=1,widthSegments:a=1,heightSegments:o=1,attributes:n={}}={}){const i=a,s=o,l=(i+1)*(s+1),$=i*s*6,u=new Float32Array(3*l),c=new Float32Array(3*l),d=new Float32Array(2*l),z=l>65536?new Uint32Array($):new Uint16Array($);Wa.buildPlane(u,c,d,z,t,r,0,i,s),Object.assign(n,{position:{size:3,data:u},normal:{size:3,data:c},uv:{size:2,data:d},index:{data:z}}),super(e,n)}static buildPlane(e,t,r,a,o,n,i,s,l,$=0,u=1,c=2,d=1,z=-1,p=0,S=0){const w=p,x=o/s,y=n/l;for(let h=0;h<=l;h++){let m=h*y-n/2;for(let n=0;n<=s;n++,p++){let y=n*x-o/2;if(e[3*p+$]=y*d,e[3*p+u]=m*z,e[3*p+c]=i/2,t[3*p+$]=0,t[3*p+u]=0,t[3*p+c]=i>=0?1:-1,r[2*p]=n/s,r[2*p+1]=1-h/l,h===l||n===s)continue;let P=w+n+h*(s+1),g=w+n+(h+1)*(s+1),A=w+n+(h+1)*(s+1)+1,b=w+n+h*(s+1)+1;a[6*S]=P,a[6*S+1]=g,a[6*S+2]=b,a[6*S+3]=g,a[6*S+4]=A,a[6*S+5]=b,S++}}}}var Xa=function(){return{create:function(r){var e=new window.IntersectionObserver(function(e,n){e.forEach(function(e){r.callback(e.target,e.isIntersecting,function(r){return n.unobserve(r)})})},{root:null,rootMargin:"".concat(r.offset||0),threshold:.1});return{observe:function(r){return e.observe(r)}}}}};var ma={lerp:function(t,n,r){return(1-r)*t+r*n},smoothstep:function(t,n,r){return(t-n)/(r-n)},cycle:function(t,n,r,p){return t+p>r?n:t+p},map:function(t,n,r,p,o){return(t-n)*(o-p)/(r-n)+p},clamp:function(t,n,r){return Math.min(Math.max(t,n),r)},pcurve:function(t,n,r){return Math.pow(n+r,n+r)/(Math.pow(n,n)*Math.pow(r,r))*Math.pow(t,n)*Math.pow(1-t,r)}};var _={uA:navigator.userAgent.toLowerCase(),get isMobile(){return /mobi|android|tablet|ipad|iphone/.test(this.uA)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints},get isMobileAndroid(){return /android.*mobile/.test(this.uA)},get isAndroid(){return this.isMobileAndroid||!this.isMobileAndroid&&/android/i.test(this.uA)},get isFirefox(){return-1<this.uA.indexOf("firefox")},get safari(){return this.uA.match(/version\/[\d.]+.*safari/)},get isSafari(){return!!this.safari&&!this.isAndroid},get isSafariOlderThan8(){var i=8;return this.isSafari&&(i=+this.safari[0].match(/version\/\d{1,2}/)[0].split("/")[1]),i<8},get isIEolderThan11(){return-1<this.uA.indexOf("msie")},get isIE11(){return 0<navigator.appVersion.indexOf("Trident/")},get isEdge(){return /Edge\/\d./i.test(this.uA)}};function sd(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Ya(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function td(e,a,t){return a&&Ya(e.prototype,a),t&&Ya(e,t),e}var ud=function(){function e(){sd(this,e),this.tasks={}}return td(e,[{key:"add",value:function(e){var a=this;document.addEventListener(e,function(t){a.tasks[e].forEach(function(e){t.target.matches(e.selector)&&e.callback.apply(null,[t,e.args])})})}},{key:"on",value:function(e,a,t,r){this.tasks[e]||(this.tasks[e]=[],this.add(e)),this.tasks[e].push({selector:a,callback:t,args:r})}}]),e}(),a=new ud;function vd(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Za(i,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function wd(i,e,o){return e&&Za(i.prototype,e),o&&Za(i,o),i}var xd=function(){function i(){vd(this,i),this.allowedKeys={37:"left",38:"up",39:"right",40:"down",65:"a",66:"b"},this.konamiCode=["up","up","down","down","left","right","left","right","b","a"],this.konamiCodePosition=0}return wd(i,[{key:"init",value:function(){this.listen()}},{key:"listen",value:function(){var i=this;document.addEventListener("keydown",function(e){i.allowedKeys[e.keyCode]==i.konamiCode[i.konamiCodePosition]?(i.konamiCodePosition++,i.konamiCodePosition==i.konamiCode.length&&(i.activate(),i.konamiCodePosition=0)):i.konamiCodePosition=0})}},{key:"activate",value:function(){console.log("[cool stuff here]")}}]),i}(),b=new xd;function yd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function zd(t,e,r){return e&&$a(t.prototype,e),r&&$a(t,r),t}var Ad=function(){function t(){yd(this,t),this.wait=!1}return zd(t,[{key:"create",value:function(t,e,r){var a=arguments,n=this;return function(){n.wait||(t.apply(r,a),n.wait=!0,setTimeout(function(){n.wait=!1},e))}}}]),t}();var Bd=function(){function e(){Cb(this,e),this.renderer=new _b({dpr:Math.min(window.devicePixelRatio,2.5),width:window.innerWidth,height:window.innerHeight,antialias:!0,alpha:!0,powerPreference:"high-performance"}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas);var r=window.innerHeight;this.camera=new Pc(this.gl,{fov:2*Math.atan(r/10)*(180/Math.PI)}),this.camera.position.z=5,this.listen(),this.resize(),this.scene=new ka}return Db(e,[{key:"update",value:function(){this.renderer.render({scene:this.scene,camera:this.camera})}},{key:"listen",value:function(){window.addEventListener("resize",this.resize.bind(this),{passive:!0})}},{key:"resize",value:function(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:this.gl.canvas.width/this.gl.canvas.height})}}]),e}();var Cd,Dd,Ed,Fd,Gd,Hd;function Id(e){return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kd(e,t,r){return t&&_a(e.prototype,t),r&&_a(e,r),e}function Ld(e,t,r){return(Ld="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Md(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Md(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aa(e)););return e}function Nd(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Od(e,t)}function Od(e,t){return(Od=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pd(e){var t=Sd();return function(){var r,n=aa(e);if(t){var o=aa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Qd(this,r)}}function Qd(e,t){return!t||"object"!==Id(t)&&"function"!=typeof t?Rd(e):t}function Rd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sd(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function aa(e){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Td(e){if(window.createImageBitmap){fetch("data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEAAQAcJaQAA3AA/v3AgAA=").then(function(e){return e.blob()}).then(function(t){createImageBitmap(t).then(function(){e(!0)},function(){e(!1)})})}else e(!1)}var Ud="\n\n//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n// Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n  \n// Gradients\n// ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n  \n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n  \n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n  \n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n  \n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n  \n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n  \n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n  \n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n  \n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  \n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}        \n";var ab={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},na={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Vd=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ba={CSS:{},springs:{}};function H(t,n,r){return Math.min(Math.max(t,n),r)}function W(t,n){return t.indexOf(n)>-1}function oa(t,n){return t.apply(null,n)}var k={arr:function(t){return Array.isArray(t)},obj:function(t){return W(Object.prototype.toString.call(t),"Object")},pth:function(t){return k.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||k.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},hex:function(t){return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return /^rgb/.test(t)},hsl:function(t){return /^hsl/.test(t)},col:function(t){return k.hex(t)||k.rgb(t)||k.hsl(t)},key:function(t){return!ab.hasOwnProperty(t)&&!na.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}};function bb(t){var n=/\(([^)]+)\)/.exec(t);return n?n[1].split(",").map(function(t){return parseFloat(t)}):[]}function cb(t,n){var r=bb(t),e=H(k.und(r[0])?1:r[0],.1,100),a=H(k.und(r[1])?100:r[1],.1,100),$=H(k.und(r[2])?10:r[2],.1,100),i=H(k.und(r[3])?0:r[3],.1,100),o=Math.sqrt(a/e),s=$/(2*Math.sqrt(a*e)),u=s<1?o*Math.sqrt(1-s*s):0,v=1,c=s<1?(s*o-i)/u:-i+o;function l(t){var r=n?n*t/1e3:t;return r=s<1?Math.exp(-r*s*o)*(v*Math.cos(u*r)+c*Math.sin(u*r)):(v+c*r)*Math.exp(-r*o),0===t||1===t?t:1-r}return n?l:function(){var n=ba.springs[t];if(n)return n;for(var r=0,e=0;;)if(1===l(r+=1/6)){if(++e>=16)break}else e=0;var a=r*(1/6)*1e3;return ba.springs[t]=a,a}}function Wd(t){return void 0===t&&(t=10),function(n){return Math.ceil(H(n,1e-6,1)*t)*(1/t)}}var Xd=function(){var t=11,n=1/(t-1);function r(t,n){return 1-3*n+3*t}function e(t,n){return 3*n-6*t}function a(t){return 3*t}function $(t,n,$){return((r(n,$)*t+e(n,$))*t+a(n))*t}function i(t,n,$){return 3*r(n,$)*t*t+2*e(n,$)*t+a(n)}return function(r,e,a,o){if(0<=r&&r<=1&&0<=a&&a<=1){var s=new Float32Array(t);if(r!==e||a!==o)for(var u=0;u<t;++u)s[u]=$(u*n,r,a);return function(t){return r===e&&a===o?t:0===t||1===t?t:$(v(t),e,o)}}function v(e){for(var o=0,u=1,v=t-1;u!==v&&s[u]<=e;++u)o+=n;var c=o+(e-s[--u])/(s[u+1]-s[u])*n,l=i(c,r,a);return l>=.001?function(t,n,r,e){for(var a=0;a<4;++a){var o=i(n,r,e);if(0===o)return n;n-=($(n,r,e)-t)/o}return n}(e,c,r,a):0===l?c:function(t,n,r,e,a){var i,o,s=0;do{(i=$(o=n+(r-n)/2,e,a)-t)>0?r=o:n=o}while(Math.abs(i)>1e-7&&++s<10);return o}(e,o,o+n,r,a)}}}(),db=function(){var t={linear:function(){return function(t){return t}}},n={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var n,r=4;t<((n=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*n-2)/22-t,2)}},Elastic:function(t,n){void 0===t&&(t=1),void 0===n&&(n=.5);var r=H(t,1,10),e=H(n,.1,2);return function(t){return 0===t||1===t?t:-r*Math.pow(2,10*(t-1))*Math.sin((t-1-e/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/e)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach(function(t,r){n[t]=function(){return function(t){return Math.pow(t,r+2)}}}),Object.keys(n).forEach(function(r){var e=n[r];t["easeIn"+r]=e,t["easeOut"+r]=function(t,n){return function(r){return 1-e(t,n)(1-r)}},t["easeInOut"+r]=function(t,n){return function(r){return r<.5?e(t,n)(2*r)/2:1-e(t,n)(-2*r+2)/2}}}),t}();function pa(t,n){if(k.fnc(t))return t;var r=t.split("(")[0],e=db[r],a=bb(t);switch(r){case"spring":return cb(t,n);case"cubicBezier":return oa(Xd,a);case"steps":return oa(Wd,a);default:return oa(e,a);}}function eb(t){try{return document.querySelectorAll(t)}catch(n){return}}function ca(t,n){for(var r=t.length,e=arguments.length>=2?arguments[1]:void 0,a=[],$=0;$<r;$++)if($ in t){var i=t[$];n.call(e,i,$,t)&&a.push(i)}return a}function da(t){return t.reduce(function(t,n){return t.concat(k.arr(n)?da(n):n)},[])}function fb(t){return k.arr(t)?t:(k.str(t)&&(t=eb(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function qa(t,n){return t.some(function(t){return t===n})}function ra(t){var n={};for(var r in t)n[r]=t[r];return n}function sa(t,n){var r=ra(t);for(var e in t)r[e]=n.hasOwnProperty(e)?n[e]:t[e];return r}function ea(t,n){var r=ra(t);for(var e in n)r[e]=k.und(t[e])?n[e]:t[e];return r}function Yd(t){var n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return n?"rgba("+n[1]+",1)":t}function Zd(t){var n=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,n,r,e){return n+n+r+r+e+e}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return"rgba("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+",1)"}function $d(t){var n,r,e,a=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),$=parseInt(a[1],10)/360,i=parseInt(a[2],10)/100,o=parseInt(a[3],10)/100,s=a[4]||1;function u(t,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(n-t)*r:r<.5?n:r<2/3?t+(n-t)*(2/3-r)*6:t}if(0==i)n=r=e=o;else{var v=o<.5?o*(1+i):o+i-o*i,c=2*o-v;n=u(c,v,$+1/3),r=u(c,v,$),e=u(c,v,$-1/3)}return"rgba("+255*n+","+255*r+","+255*e+","+s+")"}function _d(t){return k.rgb(t)?Yd(t):k.hex(t)?Zd(t):k.hsl(t)?$d(t):void 0}function L(t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(n)return n[1]}function ae(t){return W(t,"translate")||"perspective"===t?"px":W(t,"rotate")||W(t,"skew")?"deg":void 0}function ta(t,n){return k.fnc(t)?t(n.target,n.id,n.total):t}function J(t,n){return t.getAttribute(n)}function ua(t,n,r){if(qa([r,"deg","rad","turn"],L(n)))return n;var e=ba.CSS[n+r];if(!k.und(e))return e;var a=document.createElement(t.tagName),$=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;$.appendChild(a),a.style.position="absolute",a.style.width=100+r;var i=100/a.offsetWidth;$.removeChild(a);var o=i*parseFloat(n);return ba.CSS[n+r]=o,o}function gb(t,n,r){if(n in t.style){var e=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=t.style[n]||getComputedStyle(t).getPropertyValue(e)||"0";return r?ua(t,a,r):a}}function va(t,n){return k.dom(t)&&!k.inp(t)&&(J(t,n)||k.svg(t)&&t[n])?"attribute":k.dom(t)&&qa(Vd,n)?"transform":k.dom(t)&&"transform"!==n&&gb(t,n)?"css":null!=t[n]?"object":void 0}function hb(t){if(k.dom(t)){for(var n,r=t.style.transform||"",e=/(\w+)\(([^)]*)\)/g,a=new Map;n=e.exec(r);)a.set(n[1],n[2]);return a}}function be(t,n,r,e){var a=W(n,"scale")?1:0+ae(n),$=hb(t).get(n)||a;return r&&(r.transforms.list.set(n,$),r.transforms.last=n),e?ua(t,$,e):$}function wa(t,n,r,e){switch(va(t,n)){case"transform":return be(t,n,e,r);case"css":return gb(t,n,r);case"attribute":return J(t,n);default:return t[n]||0;}}function xa(t,n){var r=/^(\*=|\+=|-=)/.exec(t);if(!r)return t;var e=L(t)||0,a=parseFloat(n),$=parseFloat(t.replace(r[0],""));switch(r[0][0]){case"+":return a+$+e;case"-":return a-$+e;case"*":return a*$+e;}}function ib(t,n){if(k.col(t))return _d(t);if(/\s/g.test(t))return t;var r=L(t),e=r?t.substr(0,t.length-r.length):t;return n?e+n:e}function ya(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function ce(t){return 2*Math.PI*J(t,"r")}function de(t){return 2*J(t,"width")+2*J(t,"height")}function ee(t){return ya({x:J(t,"x1"),y:J(t,"y1")},{x:J(t,"x2"),y:J(t,"y2")})}function jb(t){for(var n,r=t.points,e=0,a=0;a<r.numberOfItems;a++){var $=r.getItem(a);a>0&&(e+=ya(n,$)),n=$}return e}function fe(t){var n=t.points;return jb(t)+ya(n.getItem(n.numberOfItems-1),n.getItem(0))}function kb(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return ce(t);case"rect":return de(t);case"line":return ee(t);case"polyline":return jb(t);case"polygon":return fe(t);}}function ge(t){var n=kb(t);return t.setAttribute("stroke-dasharray",n),n}function he(t){for(var n=t.parentNode;k.svg(n)&&k.svg(n.parentNode);)n=n.parentNode;return n}function lb(t,n){var r=n||{},e=r.el||he(t),a=e.getBoundingClientRect(),$=J(e,"viewBox"),i=a.width,o=a.height,s=r.viewBox||($?$.split(" "):[0,0,i,o]);return{el:e,viewBox:s,x:s[0]/1,y:s[1]/1,w:i/s[2],h:o/s[3]}}function ie(t,n){var r=k.str(t)?eb(t)[0]:t,e=n||100;return function(t){return{property:t,el:r,svg:lb(r),totalLength:kb(r)*(e/100)}}}function je(t,n){function r(r){void 0===r&&(r=0);var e=n+r>=1?n+r:0;return t.el.getPointAtLength(e)}var e=lb(t.el,t.svg),a=r(),$=r(-1),i=r(1);switch(t.property){case"x":return(a.x-e.x)*e.w;case"y":return(a.y-e.y)*e.h;case"angle":return 180*Math.atan2(i.y-$.y,i.x-$.x)/Math.PI;}}function mb(t,n){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,e=ib(k.pth(t)?t.totalLength:t,n)+"";return{original:e,numbers:e.match(r)?e.match(r).map(Number):[0],strings:k.str(t)||n?e.split(r):[]}}function nb(t){return ca(t?da(k.arr(t)?t.map(fb):fb(t)):[],function(t,n,r){return r.indexOf(t)===n})}function ob(t){var n=nb(t);return n.map(function(t,r){return{target:t,id:r,total:n.length,transforms:{list:hb(t)}}})}function ke(t,n){var r=ra(n);if(/^spring/.test(r.easing)&&(r.duration=cb(r.easing)),k.arr(t)){var e=t.length;2===e&&!k.obj(t[0])?t={value:t}:k.fnc(n.duration)||(r.duration=n.duration/e)}var a=k.arr(t)?t:[t];return a.map(function(t,r){var e=k.obj(t)&&!k.pth(t)?t:{value:t};return k.und(e.delay)&&(e.delay=r?0:n.delay),k.und(e.endDelay)&&(e.endDelay=r===a.length-1?n.endDelay:0),e}).map(function(t){return ea(t,r)})}function le(t){for(var n=ca(da(t.map(function(t){return Object.keys(t)})),function(t){return k.key(t)}).reduce(function(t,n){return t.indexOf(n)<0&&t.push(n),t},[]),r={},e=function(e){var a=n[e];r[a]=t.map(function(t){var n={};for(var r in t)k.key(r)?r==a&&(n.value=t[r]):n[r]=t[r];return n})},a=0;a<n.length;a++)e(a);return r}function me(t,n){var r=[],e=n.keyframes;for(var a in e&&(n=ea(le(e),n)),n)k.key(a)&&r.push({name:a,tweens:ke(n[a],t)});return r}function ne(t,n){var r={};for(var e in t){var a=ta(t[e],n);k.arr(a)&&1===(a=a.map(function(t){return ta(t,n)})).length&&(a=a[0]),r[e]=a}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function oe(t,n){var r;return t.tweens.map(function(e){var a=ne(e,n),$=a.value,i=k.arr($)?$[1]:$,o=L(i),s=wa(n.target,t.name,o,n),u=r?r.to.original:s,v=k.arr($)?$[0]:u,c=L(v)||L(s),l=o||c;return k.und(i)&&(i=u),a.from=mb(v,l),a.to=mb(xa(i,v),l),a.start=r?r.end:0,a.end=a.start+a.delay+a.duration+a.endDelay,a.easing=pa(a.easing,a.duration),a.isPath=k.pth($),a.isColor=k.col(a.from.original),a.isColor&&(a.round=1),r=a,a})}var pb={css:function(t,n,r){return t.style[n]=r},attribute:function(t,n,r){return t.setAttribute(n,r)},object:function(t,n,r){return t[n]=r},transform:function(t,n,r,e,a){if(e.list.set(n,r),n===e.last||a){var $="";e.list.forEach(function(t,n){$+=n+"("+t+") "}),t.style.transform=$}}};function qb(t,n){ob(t).forEach(function(t){for(var r in n){var e=ta(n[r],t),a=t.target,$=L(e),i=wa(a,r,$,t),o=xa(ib(e,$||L(i)),i),s=va(a,r);pb[s](a,r,o,t.transforms,!0)}})}function pe(t,n){var r=va(t.target,n.name);if(r){var e=oe(n,t),a=e[e.length-1];return{type:r,property:n.name,animatable:t,tweens:e,duration:a.end,delay:e[0].delay,endDelay:a.endDelay}}}function qe(t,n){return ca(da(t.map(function(t){return n.map(function(n){return pe(t,n)})})),function(t){return!k.und(t)})}function rb(t,n){var r=t.length,e=function(t){return t.timelineOffset?t.timelineOffset:0},a={};return a.duration=r?Math.max.apply(Math,t.map(function(t){return e(t)+t.duration})):n.duration,a.delay=r?Math.min.apply(Math,t.map(function(t){return e(t)+t.delay})):n.delay,a.endDelay=r?a.duration-Math.max.apply(Math,t.map(function(t){return e(t)+t.duration-t.endDelay})):n.endDelay,a}var sb=0;function re(t){var n=sa(ab,t),r=sa(na,t),e=me(r,t),a=ob(t.targets),$=qe(a,e),i=rb($,r),o=sb;return sb++,ea(n,{id:o,children:[],animatables:a,animations:$,duration:i.duration,delay:i.delay,endDelay:i.endDelay})}var tb,D=[],se=[],te=function(){function t(){tb=requestAnimationFrame(n)}function n(n){var r=D.length;if(r){for(var e=0;e<r;){var a=D[e];if(a.paused){var $=D.indexOf(a);$>-1&&(D.splice($,1),r=D.length)}else a.tick(n);e++}t()}else tb=cancelAnimationFrame(tb)}return t}();function ue(){document.hidden?(D.forEach(function(t){return t.pause()}),se=D.slice(0),B.running=D=[]):se.forEach(function(t){return t.play()})}function B(t){void 0===t&&(t={});var n,r=0,e=0,a=0,$=0,i=null;function o(t){var n=window.Promise&&new Promise(function(t){return i=t});return t.finished=n,n}var s=re(t);o(s);function u(){var t=s.direction;"alternate"!==t&&(s.direction="normal"!==t?"normal":"reverse"),s.reversed=!s.reversed,n.forEach(function(t){return t.reversed=s.reversed})}function v(t){return s.reversed?s.duration-t:t}function c(){r=0,e=v(s.currentTime)*(1/B.speed)}function l(t,n){n&&n.seek(t-n.timelineOffset)}function T(t){for(var n=0,r=s.animations,e=r.length;n<e;){var a=r[n],$=a.animatable,i=a.tweens,o=i.length-1,u=i[o];o&&(u=ca(i,function(n){return t<n.end})[0]||u);for(var v=H(t-u.start-u.delay,0,u.duration)/u.duration,c=isNaN(v)?1:u.easing(v),l=u.to.strings,T=u.round,M=[],f=u.to.numbers.length,g=void 0,d=0;d<f;d++){var p=void 0,m=u.to.numbers[d],h=u.from.numbers[d]||0;p=u.isPath?je(u.value,c*m):h+c*(m-h),T&&(u.isColor&&d>2||(p=Math.round(p*T)/T)),M.push(p)}var y=l.length;if(y){g=l[0];for(var b=0;b<y;b++){l[b];var x=l[b+1],w=M[b];isNaN(w)||(g+=x?w+x:w+" ")}}else g=M[0];pb[a.type]($.target,a.property,g,$.transforms),a.currentValue=g,n++}}function M(t){s[t]&&!s.passThrough&&s[t](s)}function f(t){var c=s.duration,f=s.delay,g=c-s.endDelay,d=v(t);s.progress=H(d/c*100,0,100),s.reversePlayback=d<s.currentTime,n&&function(t){if(s.reversePlayback)for(var r=$;r--;)l(t,n[r]);else for(var e=0;e<$;e++)l(t,n[e])}(d),!s.began&&s.currentTime>0&&(s.began=!0,M("begin")),!s.loopBegan&&s.currentTime>0&&(s.loopBegan=!0,M("loopBegin")),d<=f&&0!==s.currentTime&&T(0),(d>=g&&s.currentTime!==c||!c)&&T(c),d>f&&d<g?(s.changeBegan||(s.changeBegan=!0,s.changeCompleted=!1,M("changeBegin")),M("change"),T(d)):s.changeBegan&&(s.changeCompleted=!0,s.changeBegan=!1,M("changeComplete")),s.currentTime=H(d,0,c),s.began&&M("update"),t>=c&&(e=0,s.remaining&&!0!==s.remaining&&s.remaining--,s.remaining?(r=a,M("loopComplete"),s.loopBegan=!1,"alternate"===s.direction&&u()):(s.paused=!0,s.completed||(s.completed=!0,M("loopComplete"),M("complete"),!s.passThrough&&"Promise"in window&&(i(),o(s)))))}return s.reset=function(){var t=s.direction;s.passThrough=!1,s.currentTime=0,s.progress=0,s.paused=!0,s.began=!1,s.loopBegan=!1,s.changeBegan=!1,s.completed=!1,s.changeCompleted=!1,s.reversePlayback=!1,s.reversed="reverse"===t,s.remaining=s.loop,n=s.children;for(var r=$=n.length;r--;)s.children[r].reset();(s.reversed&&!0!==s.loop||"alternate"===t&&1===s.loop)&&s.remaining++,T(s.reversed?s.duration:0)},s.set=function(t,n){return qb(t,n),s},s.tick=function(t){a=t,r||(r=a),f((a+(e-r))*B.speed)},s.seek=function(t){f(v(t))},s.pause=function(){s.paused=!0,c()},s.play=function(){s.paused&&(s.completed&&s.reset(),s.paused=!1,D.push(s),c(),tb||te())},s.reverse=function(){u(),s.completed=!s.reversed,c()},s.restart=function(){s.reset(),s.play()},s.reset(),s.autoplay&&s.play(),s}function ub(t,n){for(var r=n.length;r--;)qa(t,n[r].animatable.target)&&n.splice(r,1)}function ve(t){for(var n=nb(t),r=D.length;r--;){var e=D[r],a=e.animations,$=e.children;ub(n,a);for(var i=$.length;i--;){var o=$[i],s=o.animations;ub(n,s),s.length||o.children.length||$.splice(i,1)}a.length||$.length||e.pause()}}function we(t,n){void 0===n&&(n={});var r=n.direction||"normal",e=n.easing?pa(n.easing):null,a=n.grid,$=n.axis,i=n.from||0,o="first"===i,s="center"===i,u="last"===i,v=k.arr(t),c=v?parseFloat(t[0]):parseFloat(t),l=v?parseFloat(t[1]):0,T=L(v?t[1]:t)||0,M=n.start||0+(v?c:0),f=[],g=0;return function(t,n,d){if(o&&(i=0),s&&(i=(d-1)/2),u&&(i=d-1),!f.length){for(var p=0;p<d;p++){if(a){var m=s?(a[0]-1)/2:i%a[0],h=s?(a[1]-1)/2:Math.floor(i/a[0]),y=m-p%a[0],b=h-Math.floor(p/a[0]),x=Math.sqrt(y*y+b*b);"x"===$&&(x=-y),"y"===$&&(x=-b),f.push(x)}else f.push(Math.abs(i-p));g=Math.max.apply(Math,f)}e&&(f=f.map(function(t){return e(t/g)*g})),"reverse"===r&&(f=f.map(function(t){return $?t<0?-1*t:-t:Math.abs(g-t)}))}return M+(v?(l-c)/g:c)*(Math.round(100*f[n])/100)+T}}function xe(t){void 0===t&&(t={});var n=B(t);return n.duration=0,n.add=function(r,e){var a=D.indexOf(n),$=n.children;function i(t){t.passThrough=!0}a>-1&&D.splice(a,1);for(var o=0;o<$.length;o++)i($[o]);var s=ea(r,sa(na,t));s.targets=s.targets||t.targets;var u=n.duration;s.autoplay=!1,s.direction=n.direction,s.timelineOffset=k.und(e)?u:xa(e,u),i(n),n.seek(s.timelineOffset);var v=B(s);i(v),$.push(v);var c=rb($,t);return n.delay=c.delay,n.endDelay=c.endDelay,n.duration=c.duration,n.seek(0),n.reset(),n.autoplay&&n.play(),n},n}"undefined"!=typeof document&&document.addEventListener("visibilitychange",ue),B.version="3.2.0",B.speed=1,B.running=D,B.remove=ve,B.get=wa,B.set=qb,B.convertPx=ua,B.path=ie,B.setDashoffset=ge,B.stagger=we,B.timeline=xe,B.easing=pa,B.penner=db,B.random=function(t,n){return Math.floor(Math.random()*(n-t+1))+t};var ye,ze=false;function Ae(){if(ze)return;ze=true;ye={};ye="8.81f7f8fd.webp"}var Be,Ce=false;function De(){if(Ce)return;Ce=true;Be={};Be="43.0f601928.webp"}var Ee,Fe=false;function Ge(){if(Fe)return;Fe=true;Ee={};Ee="47.2da62d2e.webp"}var He,Ie=false;function Je(){if(Ie)return;Ie=true;He={};He="31.fcb74996.webp"}var Ke,Le=false;function Me(){if(Le)return;Le=true;Ke={};Ke="34.79561529.webp"}var Ne,Oe=false;function Pe(){if(Oe)return;Oe=true;Ne={};Ne="48.4c4e7400.webp"}var Qe,Re=false;function Se(){if(Re)return;Re=true;Qe={};Qe="8.8ed2684d.jpg"}var Te,Ue=false;function Ve(){if(Ue)return;Ue=true;Te={};Te="43.b22ca2df.jpg"}var We,Xe=false;function Ye(){if(Xe)return;Xe=true;We={};We="47.5937bcc3.jpg"}var Ze,$e=false;function _e(){if($e)return;$e=true;Ze={};Ze="31.8e647ce5.jpg"}var af,bf=false;function cf(){if(bf)return;bf=true;af={};af="34.cfbaa87b.jpg"}var df,ef=false;function ff(){if(ef)return;ef=true;df={};df="48.fb353b3f.jpg"}Td?(Cd=(Ae(),ye),Dd=(De(),Be),Ed=(Ge(),Ee),Fd=(Je(),He),Gd=(Me(),Ke),Hd=(Pe(),Ne)):(Cd=(Se(),Qe),Dd=(Ve(),Te),Ed=(Ye(),We),Fd=(_e(),Ze),Gd=(cf(),af),Hd=(ff(),df),function(){var e=document.querySelector("link[rel*='icon']")||document.createElement("link");e.type="image/x-icon",e.rel="shortcut icon",e.href="../../static/me-code.jpg",document.getElementsByTagName("head")[0].appendChild(e)}());var gf=function(e){Nd(r,Bd);var t=Pd(r);function r(){var e;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Jd(this,r),(e=t.call(this)).bounds={vw:window.innerWidth,vh:window.innerHeight},e.mouse={x:0,y:0},e.loader={count:0,pct:0,el:document.getElementById("load-pct"),total:6},e.addPlane(),e.mouseListen(),e.hoverListen(),e.shouldAnimate=!0,e.update(),e.shouldAnimate=!1,e}return Kd(r,[{key:"loadImg",value:function(e){var t=this,r=B({targets:this.loader.el,autoplay:!1,duration:800,easing:"easeInExpo",translateY:"-100%"}),n=new cd(this.gl),o=new Image;return o.src=e,o.onload=function(){o.decode().then(function(){n.image=o}).catch(function(e){n.image=o,console.log(o.src)}).finally(function(){t.loader.count++,B({targets:t.loader,pct:t.loader.count/t.loader.total*100,round:1,easing:"easeInExpo",update:function(){t.loader.el.innerText=100==t.loader.pct?"".concat(t.loader.pct,"%"):t.loader.pct<10?"00".concat(t.loader.pct,"%"):"0".concat(t.loader.pct,"%")},complete:function(){100==t.loader.pct&&r.play()}})})},n}},{key:"addPlane",value:function(){var e=this.bounds,t=e.vw,r=e.vh,n=new Wa(this.gl,{width:t,height:r});this.textures={one:this.loadImg(Cd),two:this.loadImg(Dd),three:this.loadImg(Ed),four:this.loadImg(Fd),five:this.loadImg(Gd),six:this.loadImg(Hd)};var o=new Wb(this.gl,{vertex:"\n            precision mediump float;\n            precision mediump int;\n            \n            attribute vec3 position;\n            attribute vec3 normal;\n            attribute vec2 uv;\n            \n            uniform mat4 modelViewMatrix;\n            uniform mat4 projectionMatrix;\n            uniform float u_time;\n            \n            varying vec3 vUv;\n            varying float vWave;\n\n            \n            void main() {\n                vec3 pos = position;\n                vUv = pos;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }",fragment:"\n\n            precision mediump float;\n            precision mediump int;\n\n            uniform float u_time;\n            uniform vec2 u_resolution;\n            uniform vec2 u_mouse;\n            uniform float u_hover;\n            uniform float u_wave;\n            uniform sampler2D u_texture;\n            \n            ".concat(Ud,"\n\n            varying vec3 vUv;\n            \n            void main() {\n                vec3 uvs;\n                float noiseFreq;\n                float noiseAmp;\n                float wave;\n                vec3 noisePos;\n\n                uvs = vUv * vec3(1./u_resolution.x, 1./u_resolution.y, 1.) + vec3(0.5, 0.5, 0.);\n                wave = 0.;\n\n                if (u_hover != 0.) {\n                    noiseFreq = 5.5;\n                    noiseAmp = 0.05;\n    \n                    noisePos = vec3(uvs.x * noiseFreq + u_time, uvs.yz);\n                    uvs.z += snoise(noisePos) * noiseAmp;\n                    wave = uvs.z * u_wave;\n                }\n                \n                vec3 tex = texture2D(u_texture, vec2(uvs.x, uvs.y) + wave).rgb;\n\n                // vec3 basecolor = vec3(0.9, 0.9, 0.9);\n                vec3 basecolor = vec3(0.9, 0.9, 0.9);\n                vec3 finalcolor = mix(basecolor, tex, u_hover);\n                \n                gl_FragColor.rgb = finalcolor;\n                // gl_FragColor.rgb = vec3(uvs.x + wave, uvs.y + wave, uvs.z);\n                gl_FragColor.a = 1.;\n            }"),uniforms:{u_time:{type:"f",value:0},u_resolution:{type:"vec2",value:new Z(this.bounds.vw,this.bounds.vh)},u_mouse:{type:"vec2",value:new Z(0,0)},u_texture:{value:this.textures.one},u_hover:{type:"f",value:1},u_wave:{type:"f",value:.5}}});this.plane=new ad(this.gl,{geometry:n,program:o}),this.plane.setParent(this.scene)}},{key:"mouseListen",value:function(){var e=this;window.addEventListener("mousemove",function(t){e.mouse.x=t.clientX/e.bounds.vw,e.mouse.y=t.clientY/e.bounds.vh},{passive:!0})}},{key:"hoverListen",value:function(){var e=this,t=document.querySelectorAll(".hover-line");this.currentTimer=null;var r=B({targets:this.plane.program.uniforms.u_wave,value:[.75,.125],duration:5e3,easing:"easeOutExpo",autoplay:!1,update:function(){return e.shouldAnimate=!0}}),n=B({targets:this.plane.program.uniforms.u_hover,value:[0,1],duration:0,autoplay:!1,update:function(){return e.shouldAnimate=!0},complete:function(){return e.shouldAnimate=!1}}),o=B({targets:this.plane.program.uniforms.u_hover,value:[1,0],duration:0,update:function(){return e.shouldAnimate=!0},complete:function(){return e.shouldAnimate=!1}}),i=function(){e.currentTimer=setTimeout(function(){n.play(),r.restart()},200),e.plane.program.uniforms.u_texture.value=e.textures[event.target.dataset.textureTarget]};t.forEach(function(t){t.addEventListener("mouseenter",function(e){i()}),t.addEventListener("mouseleave",function(t){clearTimeout(e.currentTimer),o.play(),setTimeout(function(){e.shouldAnimate=!1},100)})})}},{key:"update",value:function(){this.shouldAnimate&&(Ld(aa(r.prototype),"update",this).call(this),this.plane.program.uniforms.u_mouse.value=new Z(this.mouse.x,this.mouse.y),this.plane.program.uniforms.u_time.value+=.016)}}]),r}();function hf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jf(t,e,r){return e&&vb(t.prototype,e),r&&vb(t,r),t}var kf=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hf(this,t),this.scrollWrapper=document.getElementById("scroll-wrapper"),this.scrollContent=document.getElementById("scroll-content"),this.curtain=document.getElementById("loader"),this.table=document.getElementById("table-container"),this.img=document.getElementById("hero-img"),this.body=document.body,this.anchors=document.querySelectorAll("[data-scroll-to]"),this.anchorToTop=document.querySelector("[data-scroll-top]"),this.bounds={vw:window.innerWidth,vh:window.innerHeight},this.inertia=e.inertia||.075,this.ismobile=e.ismobile||!1,this.curScroll=0,this.targetScroll=0,this.dragging=!1,this.draglisten=!1,this.listeners(),this.style(),this.resize(),this.shouldAnimate=!0,this.update()}return jf(t,[{key:"listeners",value:function(){var t=this;window.addEventListener("scroll",function(e){t.dragging||(t.curScroll=document.documentElement.scrollTop,t.curtain.style.pointerEvents="all",t.shouldAnimate=!0)},{passive:!0}),window.addEventListener("resize",function(){t.resize()},{passive:!0}),this.anchorListeners(),this.ismobile||this.dragListeners()}},{key:"anchorListeners",value:function(){this.anchors.forEach(function(t){t.addEventListener("click",function(){var e=document.querySelector(t.dataset.scrollTo).getBoundingClientRect().y-24;B({targets:document.documentElement,scrollTop:e,easing:"linear",duration:200})})}),this.anchorToTop.addEventListener("click",function(){B({targets:document.documentElement,scrollTop:0,easing:"linear",duration:200})})}},{key:"dragListeners",value:function(){var t=this,e=null,r=function r(){t.animComplete?(cancelAnimationFrame(e),t.dragging=!1,t.table.style.pointerEvents="all"):e=requestAnimationFrame(r),t.shouldAnimate=!0};this.scrollWrapper.addEventListener("mousedown",function(e){t.dragstart=e.clientY,t.dragscroll=t.curScroll,t.scrollWrapper.style.cursor="grabbing",t.dragging=!0,t.draglisten=!0}),this.scrollWrapper.addEventListener("mousemove",function(e){if(t.dragging&&t.draglisten){t.table.style.pointerEvents="none";var r=3*(e.clientY-t.dragstart);t.curScroll=ma.clamp(0,t.dragscroll-r,t.scrollHeight-t.bounds.vh),document.documentElement.scrollTop=t.curScroll,t.shouldAnimate=!0}}),this.scrollWrapper.addEventListener("mouseup",function(n){t.draglisten=!1,t.scrollWrapper.style.cursor="default",e=requestAnimationFrame(r)}),this.scrollWrapper.addEventListener("mouseleave",function(n){t.draglisten=!1,t.scrollWrapper.style.cursor="default",e=requestAnimationFrame(r)})}},{key:"style",value:function(){this.scrollContent.style="width: 100vw;\n                                    min-height: 100vh;\n                                    will-change: transform;",this.scrollWrapper.style="position: fixed;"}},{key:"resize",value:function(){this.scrollHeight=this.scrollContent.scrollHeight,this.body.style.height="".concat(this.scrollHeight,"px"),this.bounds={vw:window.innerWidth,vh:window.innerHeight}}},{key:"update",value:function(){this.shouldAnimate||!this.animComplete?(this.targetScroll=ma.lerp(this.targetScroll,this.curScroll,this.inertia),this.scrollContent.style.transform="translate3d(0, ".concat(-1*this.targetScroll,"px, 0)"),this.img.style.transform="translate3d(0, ".concat(-1*ma.map(this.targetScroll,0,this.bounds.vh/4,0,25),"%, 0)"),this.shouldAnimate=!1):this.curtain.style.pointerEvents="none"}},{key:"animComplete",get:function(){return Math.round(this.curScroll)===Math.round(this.targetScroll)}},{key:"isTicking",get:function(){return this.shouldAnimate||!this.animComplete}},{key:"scrollDirectionDown",get:function(){return this.targetScroll<=this.curScroll}}]),t}();function lf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mf(e,t,n){return t&&wb(e.prototype,t),n&&wb(e,n),e}var nf=function(){function e(){lf(this,e),this.table=document.getElementById("table-container"),this.rows=document.querySelectorAll(".hover-line"),this.content=document.getElementById("scroll-content"),this.activeRow=null,this.currentTimer=null,this.listen()}return mf(e,[{key:"enterStyle",value:function(){this.currentTimer=setTimeout(function(){B({targets:".inactive",opacity:0,duration:0,easing:"easeOutExpo"})},200)}},{key:"leaveStyle",value:function(){clearTimeout(this.currentTimer),B({targets:this.rows,opacity:1,duration:0,easing:"easeOutExpo"})}},{key:"handleClick",value:function(){}},{key:"listen",value:function(){var e=this;this.rows.forEach(function(t){t.classList.add("inactive"),t.addEventListener("mouseenter",function(){t.classList.remove("inactive"),e.activeRow=t,e.enterStyle()}),t.addEventListener("mouseleave",function(){t.classList.add("inactive"),e.leaveStyle()})})}}]),e}();function of(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xb(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pf(e,t,i){return t&&xb(e.prototype,t),i&&xb(e,i),e}var qf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};of(this,e),this.once=t.once||!1,this.ismobile=t.ismobile||!1,this.limit=t.limit||10,this.observers={},this.control=!0,this.toVisible=[],this.toHidden=[],this.lock=!1,this.throttler=new Ad,this.init()}return pf(e,[{key:"init",value:function(){this.create("text",".split-wrapper",".split-line","split-visible"),this.create("hr","hr",!1,"hr-visible"),this.splitter(),this.createCascade("paras",".p-capture",".p-word","p-visible"),this.throttledUpdate=this.throttler.create(this.onEntry,200,this)}},{key:"splitter",value:function(){document.querySelectorAll(".p-capture").forEach(function(e){e.innerHTML=e.textContent.replace(/\S+/g,"<span class='p-wrapper'>\n                    <span class='p-word'>$& &hairsp;</span>\n                </span>")})}},{key:"sync",value:function(e){this.control=e}},{key:"onEntry",value:function(){var e=this;requestAnimationFrame(function(){e.toVisible.forEach(function(e){e.el.classList.add(e.visibleClass)}),e.toVisible=[]})}},{key:"update",value:function(){0!==this.toVisible.length&&this.throttledUpdate()}},{key:"idlyUpdate",value:function(){0!==this.toHidden.length&&(this.toHidden.forEach(function(e){e.el.classList.remove(e.visibleClass)}),this.toHidden=[])}},{key:"create",value:function(e,t,i,r){var s=this,o=Xa().create({callback:function(e,t,o){if(s.control){var n=i?e.querySelector(i):e;if(t){s.once&&o(n);var a=n.dataset.observerDelay?n.dataset.observerDelay:0;setTimeout(function(){s.toVisible.push({el:n,visibleClass:r})},a)}else s.once||s.toHidden.push({el:n,visibleClass:r})}},offset:"-5px"});this.observers[e]=o,document.querySelectorAll(t).forEach(function(e){o.observe(e)})}},{key:"createCascade",value:function(e,t,i,r){var s=this,o=Xa().create({callback:function(e,t,o){if(s.control){var n=e.querySelectorAll(i);t&&(s.once&&o(e),n.forEach(function(e,t){setTimeout(function(){s.toVisible.push({el:e,visibleClass:r})},25*t)}))}},offset:"-5px"});this.observers[e]=o,document.querySelectorAll(t).forEach(function(e){o.observe(e)})}}]),e}();window.addEventListener("load",function(){B.timeline().add({targets:"#loader",opacity:[1,0],easing:"easeInQuart",duration:1250,delay:1500,complete:function(){document.getElementById("loader").style.pointerEvents="none"}})});var rf=new kf({ismobile:_.isMobile,inertia:_.isMobile?.125:.075}),yb=new qf({once:!0,limit:10,ismobile:_.isMobile}),V={always:[],positiveThrottle:[],negativeThrottle:[]};if(V.always.push(rf),_.isMobile)V.always.push(yb);else{var c=new nf,sf=new gf;V.negativeThrottle.push(yb),V.always.push(sf)}var tf=("requestIdleCallback"in window),zb=0,uf=.1,Ab=1e3/60,vf=!1,Bb=function(e){var $=e-(zb||0),r=requestAnimationFrame(Bb);if(!(zb&&$<=Ab-uf)){zb=e-$%Ab;try{V.always.forEach(function($){$.update(e)}),(vf=!vf)?V.positiveThrottle.forEach(function(e){e.update()}):V.negativeThrottle.forEach(function(e){e.update(),tf&&e.idlyUpdate&&requestIdleCallback(function(){e.idlyUpdate()})})}catch(a){console.error("[Error in update loop]:",a),cancelAnimationFrame(r)}}};requestAnimationFrame(Bb);return{"d6sW":{}};});